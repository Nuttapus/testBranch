<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../node_modules/bulma/css/bulma.css">
    <link rel="stylesheet" href="../node_modules/@fortawesome/fontawesome-free/css/all.css" />
    <link rel="shortcut icon" href="../img/logo.png" />
    <title>เดินทะเบียน</title>
</head>

<body>
    <script src="../node_modules/axios/dist/axios.min.js"></script>
    <script>
        var employee;
        window.onload = function() {
            var getName = localStorage.getItem("storageName");
            var getLastName = localStorage.getItem("storageLastName");
            var getDepartment = localStorage.getItem("storageDepartment");
            document.getElementById("navName").innerHTML = `<i class="fa fa-fw fa-user"></i> &nbsp;` + getName + " " + getLastName;
            employee = getName + " " + getLastName;
            if (getDepartment === "ซื้อ") {
                document.getElementById("nav2").style.display = "none"
                document.getElementById("nav3").style.display = "none"
                document.getElementById("nav4").style.display = "none"
                document.getElementById("nav6").style.display = "none"
            } else if (getDepartment === "ขาย") {
                document.getElementById("nav1").style.display = "none"
                document.getElementById("nav3").style.display = "none"
                document.getElementById("nav4").style.display = "none"
                document.getElementById("nav6").style.display = "none"
            } else if (getDepartment === "เดินทะเบียน") {
                document.getElementById("nav1").style.display = "none"
                document.getElementById("nav2").style.display = "none"
                document.getElementById("nav4").style.display = "none"
                document.getElementById("nav6").style.display = "none"
            } else if (getDepartment === "ช่าง") {
                document.getElementById("nav1").style.display = "none"
                document.getElementById("nav2").style.display = "none"
                document.getElementById("nav3").style.display = "none"
                document.getElementById("nav6").style.display = "none"
            } else if (getDepartment === "ประชาสัมพันธ์") {
                document.getElementById("nav3").style.display = "none"
                document.getElementById("nav4").style.display = "none"
                document.getElementById("nav6").style.display = "none"
            } else {
                document.getElementById("dashboard").style.display = "block"
            }
        }

        function isText(e) {
            var key = e.keyCode;
            if ((key >= 65 && key <= 90) || key == 8 || key >= 97 && key <= 122 || key >= 3585 && key <= 3661) {
                return true
            } else {
                return false
            }
        }

        function isNumber(e) {
            e = e || window.event;
            var charCode = e.which ? e.which : e.keyCode;
            idLength = e.key
            return /\d/.test(String.fromCharCode(charCode));
        }

        function addRegis() {
            var dateregis = document.getElementById("dateregis").value;
            var regisnumber = document.getElementById("regisnumber").value;
            var province = document.getElementById("province").value;
            var genre = document.getElementById("genre").value;
            var look = document.getElementById("look").value;
            var brand = document.getElementById("brand").value;
            var model = document.getElementById("model").value;
            var years = document.getElementById("year").value;
            var color = document.getElementById("color").value;
            var carnumber = document.getElementById("carnumber").value;
            var lieto = document.getElementById("lieto").value;
            var enginebrand = document.getElementById("enginebrand").value;
            var enginenumber = document.getElementById("enginenumber").value;
            var address = document.getElementById("address").value;
            var fuel = document.getElementById("fuel").value;
            var tanknumber = document.getElementById("tanknumber").value;
            var quantity = document.getElementById("quantity").value;
            var CC = document.getElementById("CC").value;
            var hp = document.getElementById("hp").value;
            var carweight = document.getElementById("carweight").value;
            var payload = document.getElementById("payload").value;
            var totalweight = document.getElementById("totalweight").value;
            var seats = document.getElementById("seats").value;
            if (dateregis != "") {
                if (regisnumber != "") {
                    if (province != "") {
                        if (genre != "") {
                            if (look != "") {
                                if (brand != "") {
                                    if (model != "") {
                                        if (color != "") {
                                            if (carnumber != "") {
                                                if (lieto != "") {
                                                    if (enginebrand != "") {
                                                        if (enginenumber != "") {
                                                            if (address != "") {
                                                                if (tanknumber != "") {
                                                                    if (quantity != "") {
                                                                        if (CC != "") {
                                                                            if (hp != "") {
                                                                                if (carweight != "") {
                                                                                    if (payload != "") {
                                                                                        if (totalweight != "") {
                                                                                            if (seats != "") {
                                                                                                const data = {
                                                                                                    registrationDate: dateregis,
                                                                                                    registrationNumber: regisnumber,
                                                                                                    province: province,
                                                                                                    genre: genre,
                                                                                                    type: look,
                                                                                                    brand: brand,
                                                                                                    model: model,
                                                                                                    modelYear: years,
                                                                                                    color: color,
                                                                                                    carNumber: carnumber,
                                                                                                    address: lieto,
                                                                                                    engineBand: enginebrand,
                                                                                                    engineNumber: enginenumber,
                                                                                                    engineNumberAddress: address,
                                                                                                    fuel: fuel,
                                                                                                    tankNumber: tanknumber,
                                                                                                    quantity: quantity,
                                                                                                    cc: CC,
                                                                                                    horsePower: hp,
                                                                                                    carWeight: carweight,
                                                                                                    payLoad: payload,
                                                                                                    totalWeight: totalweight,
                                                                                                    seat: seats,
                                                                                                    type: "MST_Registration"
                                                                                                }
                                                                                                axios.post("http://localhost:4001/insert", data).then((res) => {
                                                                                                    alert("เพิ่มข้อมูลสำเร็จ")
                                                                                                    window.location.href = "./ใบรับทะเบียน.html"
                                                                                                    localStorage.setItem("idCar", regisnumber)
                                                                                                });
                                                                                            } else {
                                                                                                alert("กรุณากรอกที่นั่ง");
                                                                                            }
                                                                                        } else {
                                                                                            alert("กรุณากรอกน้ำหนักรวม");
                                                                                        }
                                                                                    } else {
                                                                                        alert("กรุณากรอกน้ำหนักบรรทุก/น้ำหนักลงเพลา");
                                                                                    }
                                                                                } else {
                                                                                    alert("กรุณากรอกน้ำหนักรถ");
                                                                                }
                                                                            } else {
                                                                                alert("กรุณากรอกแรงม้า");
                                                                            }
                                                                        } else {
                                                                            alert("กรุณากรอกซีซี");
                                                                        }
                                                                    } else {
                                                                        alert("กรุณากรอกจำนวน");
                                                                    }
                                                                } else {
                                                                    alert("กรุณากรอกเลขถัง");
                                                                }
                                                            } else {
                                                                alert("กรุณากรอกที่อยู่เลขเครื่องยนต์");
                                                            }
                                                        } else {
                                                            alert("กรุณากรอกเลขเครื่องยนต์");
                                                        }
                                                    } else {
                                                        alert("กรุณากรอกยี่ห้อเครื่องยนต์");
                                                    }
                                                } else {
                                                    alert("กรุณากรอกที่อยู่เลขตัวรถ");
                                                }
                                            } else {
                                                alert("กรุณากรอกเลขตัวรถ");
                                            }
                                        } else {
                                            alert("กรุณากรอกสี");
                                        }
                                    } else {
                                        alert("กรุณากรอกแบบ");
                                    }
                                } else {
                                    alert("กรุณากรอกยี่ห้อ");
                                }
                            } else {
                                alert("กรุณากรอกลักษณะ");
                            }
                        } else {
                            alert("กรุณากรอกประเภท");
                        }
                    } else {
                        alert("กรุณาเลือกจังหวัด");
                    }
                } else {
                    alert("กรุณากรอกเลขทะเบียน");
                }
            } else {
                alert("กรุณากรอกวันจดทะเบียน");
            }
        }
    </script>

    <nav class="navbar is-info" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <a class="navbar-item" href="./หน้าหลัก.html">
                <img src="../img/logo.png" width="112" height="28" />
            </a>

            <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
                <span aria-hidden="true"></span> <span aria-hidden="true"></span>
                <span aria-hidden="true"></span>
            </a>
        </div>

        <div id="navbarBasicExample" class="navbar-menu">
            <div class="navbar-start">
                <a class="navbar-item" href="./หน้าหลัก.html">หน้าหลัก</a>
                <a class="navbar-item" id="nav1" href="./ค้นหารถ.html">ซื้อรถ</a>
                <a class="navbar-item" id="nav2" href="./หน้าขาย1.html">ขายรถ</a>
                <a class="navbar-item is-active" id="nav3" href="./เดินทะเบียน.html">เดินทะเบียน</a>
                <a class="navbar-item" id="nav4" href="./ซ่อมรถ.html">ซ่อม</a>
                <a class="navbar-item" id="nav5" href="./ข้อมูลลูกค้า.html">ข้อมูลลูกค้า</a>
                <a class="navbar-item" id="nav6" href="./จัดการพนักงาน.html">จัดการพนักงาน</a>
            </div>
            <div class="navbar-end">
                <div class="navbar-item has-dropdown is-hoverable">
                    <a class="navbar-link" id="navName">
                        <i class="fa fa-fw fa-user"></i> &nbsp; ชื่อผู้ใช้
                    </a>
                    <div class="navbar-dropdown">
                        <a class="navbar-item" id="dashboard" href="./กำไรขาดทุน.html" style="display: none;">
                                รายได้-รายจ่าย
                              </a>
                        <a class="navbar-item" href="../ล็อกอิน.html"> ออกจากระบบ </a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <h1 class="title has-text-centered" style="margin-top: 1%">เดินทะเบียน</h1>
    </div>
    <div class="box" style="margin-left: 10% ; margin-right:10% ; margin-top: 1%">
        <form>
            <div class="columns is-gapless level">
                <div class="column is-5 level-left">
                    วันจดทะเบียน :
                    <input class="input " type="date" style="float:right; width: 60%" id="dateregis" type="date">
                </div>
                <div class="column is-5 level-right">
                    เลขทะเบียน :
                    <input class="input " style="float:right; width: 60%" id="regisnumber" type="text" maxlength="10">
                </div>
            </div>
            <div class="columns is-gapless  level">
                <div class="column is-5 level-left">
                    จังหวัด :
                    <div class="control" style="float:right; width: 70%">
                        <div class="select " style="float:right;width: 85%">
                            <select style="width: 370px" id="province">
                <option value="" selected>--- เลือกจังหวัด ---</option>
                <option value="กรุงเทพมหานคร">กรุงเทพมหานคร</option>
                <option value="กระบี่">กระบี่ </option>
                <option value="กาญจนบุรี">กาญจนบุรี </option>
                <option value="กาฬสินธุ์">กาฬสินธุ์ </option>
                <option value="กำแพงเพชร">กำแพงเพชร </option>
                <option value="ขอนแก่น">ขอนแก่น</option>
                <option value="จันทบุรี">จันทบุรี</option>
                <option value="ฉะเชิงเทรา">ฉะเชิงเทรา </option>
                <option value="ชัยนาท">ชัยนาท </option>
                <option value="ชัยภูมิ">ชัยภูมิ </option>
                <option value="ชุมพร">ชุมพร </option>
                <option value="ชลบุรี">ชลบุรี </option>
                <option value="เชียงใหม่">เชียงใหม่ </option>
                <option value="เชียงราย">เชียงราย </option>
                <option value="ตรัง">ตรัง </option>
                <option value="ตราด">ตราด </option>
                <option value="ตาก">ตาก </option>
                <option value="นครนายก">นครนายก </option>
                <option value="นครปฐม">นครปฐม </option>
                <option value="นครพนม">นครพนม </option>
                <option value="นครราชสีมา">นครราชสีมา </option>
                <option value="นครศรีธรรมราช">นครศรีธรรมราช </option>
                <option value="นครสวรรค์">นครสวรรค์ </option>
                <option value="นราธิวาส">นราธิวาส </option>
                <option value="น่าน">น่าน </option>
                <option value="นนทบุรี">นนทบุรี </option>
                <option value="บึงกาฬ">บึงกาฬ</option>
                <option value="บุรีรัมย์">บุรีรัมย์</option>
                <option value="ประจวบคีรีขันธ์">ประจวบคีรีขันธ์ </option>
                <option value="ปทุมธานี">ปทุมธานี </option>
                <option value="ปราจีนบุรี">ปราจีนบุรี </option>
                <option value="ปัตตานี">ปัตตานี </option>
                <option value="พะเยา">พะเยา </option>
                <option value="พระนครศรีอยุธยา">พระนครศรีอยุธยา </option>
                <option value="พังงา">พังงา </option>
                <option value="พิจิตร">พิจิตร </option>
                <option value="พิษณุโลก">พิษณุโลก </option>
                <option value="เพชรบุรี">เพชรบุรี </option>
                <option value="เพชรบูรณ์">เพชรบูรณ์ </option>
                <option value="แพร่">แพร่ </option>
                <option value="พัทลุง">พัทลุง </option>
                <option value="ภูเก็ต">ภูเก็ต </option>
                <option value="มหาสารคาม">มหาสารคาม </option>
                <option value="มุกดาหาร">มุกดาหาร </option>
                <option value="แม่ฮ่องสอน">แม่ฮ่องสอน </option>
                <option value="ยโสธร">ยโสธร </option>
                <option value="ยะลา">ยะลา </option>
                <option value="ร้อยเอ็ด">ร้อยเอ็ด </option>
                <option value="ระนอง">ระนอง </option>
                <option value="ระยอง">ระยอง </option>
                <option value="ราชบุรี">ราชบุรี</option>
                <option value="ลพบุรี">ลพบุรี </option>
                <option value="ลำปาง">ลำปาง </option>
                <option value="ลำพูน">ลำพูน </option>
                <option value="เลย">เลย </option>
                <option value="ศรีสะเกษ">ศรีสะเกษ</option>
                <option value="สกลนคร">สกลนคร</option>
                <option value="สงขลา">สงขลา </option>
                <option value="สมุทรสาคร">สมุทรสาคร </option>
                <option value="สมุทรปราการ">สมุทรปราการ </option>
                <option value="สมุทรสงคราม">สมุทรสงคราม </option>
                <option value="สระแก้ว">สระแก้ว </option>
                <option value="สระบุรี">สระบุรี </option>
                <option value="สิงห์บุรี">สิงห์บุรี </option>
                <option value="สุโขทัย">สุโขทัย </option>
                <option value="สุพรรณบุรี">สุพรรณบุรี </option>
                <option value="สุราษฎร์ธานี">สุราษฎร์ธานี </option>
                <option value="สุรินทร์">สุรินทร์ </option>
                <option value="สตูล">สตูล </option>
                <option value="หนองคาย">หนองคาย </option>
                <option value="หนองบัวลำภู">หนองบัวลำภู </option>
                <option value="อำนาจเจริญ">อำนาจเจริญ </option>
                <option value="อุดรธานี">อุดรธานี </option>
                <option value="อุตรดิตถ์">อุตรดิตถ์ </option>
                <option value="อุทัยธานี">อุทัยธานี </option>
                <option value="อุบลราชธานี">อุบลราชธานี</option>
                <option value="อ่างทอง">อ่างทอง </option>
              </select>
                        </div>
                    </div>
                </div>
                <div class="column is-5 level-right">
                    ประเภท :
                    <input class="input " style="float:right; width: 60%" id="genre" type="text" onkeypress="return isText(event)" maxlength="20">
                </div>
            </div>
            <div class="columns is-gapless level">
                <div class="column is-5 level-left">
                    ลักษณะ :
                    <input class="input" style="float:right; width: 60%" id="look" type="text" onkeypress="return isText(event)" maxlength="20">
                </div>
                <div class="column is-5 level-right">
                    ยี่ห้อ :
                    <input class="input " style="float:right; width: 60%" id="brand" type="text" onkeypress="return isText(event)" maxlength="20">
                </div>
            </div>
            <div class="columns is-gapless level">
                <div class="column is-3 level-left">
                    แบบ :
                    <input class="input " style="float:right; width: 70%" id="model" type="text" onkeypress="return isText(event)" maxlength="10">
                </div>
                <div class="column is-3">
                    รุ่นปี ค.ศ. :
                    <div class="control" style="float:right; width: 70%">
                        <div class="select ">
                            <select style="width: 300px" id="year">
                <option>2019</option>
                <option>2018</option>
                <option>2017</option>
                <option>2016</option>
                <option>2015</option>
                <option>2014</option>
                <option>2013</option>
                <option>2012</option>
                <option>2011</option>
                <option>2010</option>
                <option>2009</option>
                <option>2008</option>
                <option>2007</option>
                <option>2006</option>
                <option>2005</option>
                <option>2004</option>
                <option>2003</option>
                <option>2002</option>
                <option>2001</option>
                <option>2000</option>
                <option>1999</option>
                <option>1998</option>
                <option>1997</option>
                <option>1996</option>
                <option>1995</option>
                <option>1994</option>
                <option>1993</option>
                <option>1992</option>
                <option>1991</option>
                <option>1990</option>
                <option>1989</option>
                <option>1988</option>
                <option>1987</option>
                <option>1986</option>
                <option>1985</option>
                <option>1984</option>
                <option>1983</option>
                <option>1982</option>
                <option>1981</option>
              </select>
                        </div>
                    </div>
                </div>
                <div class="column is-3 level-right">
                    สี :
                    <input class="input " style="float:right; width: 70%" id="color" type="text" onkeypress="return isText(event)" maxlength="10">
                </div>
            </div>
            <div class="columns is-gapless level">
                <div class="column is-5 level-left">
                    เลขตัวรถ :
                    <input class="input " style="float:right; width: 60%" id="carnumber" type="text" maxlength="15">
                </div>
                <div class="column is-5 level-right">
                    อยู่ที่ :
                    <input class="input " style="float:right; width: 60%" id="lieto" type="text" onkeypress="return isText(event)" maxlength="20">
                </div>
            </div>
            <div class="columns is-gapless level">
                <div class="column is-5 level-left">
                    ยี่ห้อเครื่องยนต์ :
                    <input class="input " style="float:right; width: 60%" id="enginebrand" type="text" onkeypress="return isText(event)" maxlength="10">
                </div>
                <div class="column is-5 level-right">
                    เลขเครื่องยนต์ :
                    <input class="input " style="float:right; width: 60%" id="enginenumber" type="text" maxlength="15">
                </div>
            </div>
            <div class="columns is-gapless level">
                <div class="column is-5 level-left">
                    ที่อยู่ :
                    <input class="input " style="float:right; width: 60%" id="address" type="text" onkeypress="return isText(event)" maxlength="20">
                </div>
                <div class="column is-5 level-right">
                    เชื้อเพลิง :
                    <input class="input " style="float:right; width: 60%" id="fuel" type="text" onkeypress="return isText(event)" maxlength="10">
                </div>
            </div>
            <div class="columns is-gapless level">
                <div class="column is-5 level-left">
                    เลขถัง :
                    <input class="input " style="float:right; width: 60%" id="tanknumber" type="text" maxlength="15">
                </div>
                <div class="column is-5 level-right">
                    จำนวน :
                    <input class="input " style="float:right; width: 60%" id="quantity" type="text" maxlength="10">
                </div>
            </div>
            <div class="columns is-gapless level">
                <div class="column is-5 level-left">
                    ซีซี :
                    <input class="input " style="float:right; width: 60%" id="CC" type="text" onkeypress="return isNumber(event)" maxlength="10">
                </div>
                <div class="column is-5 level-right">
                    แรงม้า :
                    <input class="input " style="float:right; width: 60%" id="hp" type="text" onkeypress="return isNumber(event)" maxlength="10">
                </div>
            </div>
            <div class="columns is-gapless level">
                <div class="column is-5 level-left">
                    น้ำหนักรถ :
                    <input class="input " style="float:right; width: 60%" id="carweight" type="text" onkeypress="return isNumber(event)" maxlength="10">
                </div>
                <div class="column is-5 level-right">
                    น้ำหนักบรรทุก/น้ำหนักลงเพลา :
                    <input class="input " style="float:right; width: 60%" id="payload" type="text" onkeypress="return isNumber(event)" maxlength="10">
                </div>
            </div>
            <div class="columns is-gapless level">
                <div class="column is-5 level-left">
                    น้ำหนักรวม :
                    <input class="input " style="float:right; width: 60%" id="totalweight" type="text" onkeypress="return isNumber(event)" maxlength="10">
                </div>
                <div class="column is-5 level-right">
                    ที่นั่ง :
                    <input class="input " style="float:right; width: 60%" id="seats" type="text" onkeypress="return isNumber(event)" maxlength="10">
                </div>
            </div>
        </form>
    </div>
    <div class="field is-grouped is-grouped-right" style="margin-top: 1%; margin-right: 10%">
        <p class="control">
            <a class="button is-info is-outlined" onclick="addRegis()" style="width: 150px">
        ถัดไป
      </a>
        </p>
        <p class="control">
            <a class="button is-info is-outlined" style="width: 150px;">
        ยกเลิก
      </a>
        </p>
    </div>
    </div>
</body>

</html>